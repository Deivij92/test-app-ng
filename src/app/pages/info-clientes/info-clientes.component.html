<div class="container-fluid mt--7">
  @if (showTable) {
<div class="row">
  <div class="col">
    <div class="card shadow">
      <div class=" card-header border-0 "><h3 class=" mb-0">Lista de solictudes</h3></div>
      <div class="table-responsive">
        <table class="table align-items-center table-flush">
          <thead class="thead-light">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Nombres y apellidos</th>
            <th scope="col">Numero Documento</th>
            <th scope="col">Tipo Documento</th>
            <th scope="col">Correo electronico</th>
            <th scope="col">Ciudad</th>
            <th scope="col">Direccion residencia</th>
            <th scope="col">Telefono</th>
            <th scope="col" class="text-center">Acciones</th>
          </tr>
          </thead>
          <tbody>
            @for (item of clienteList; track item){
              <tr >
                <td>{{ item.id}}</td>
                <td>{{ item.apellidos}}</td>
                <td>{{ item.numeroDocumento }}</td>
                <td>{{ item.tipoDocumento }}</td>
                <td>{{item.email}}</td>
                <td>{{ item.ciudad}}</td>
                <td>{{ item.residencia}}</td>
                <td>{{ item.telefono}}</td>
                <td>
                  <!-- Alinea el contenido al centro -->
                  <button class="btn my-4 btn-outline-secondary btn-sm" type="submit" style="margin-right: 8px"
                                    (click)="ObtenerInformacionLab(item.id)">
                                    <span title="Editar categoria">
                                        <i class="fas fa-eye" style="font-size: 15px;"></i>
                                    </span> Info. laboral
                  </button>
                  <button class="btn my-4 btn-outline-success btn-sm" type="submit" style="margin-right: 8px"
                                    (click)="obtenerReferencias(item.id)">
                                    <span title="Editar categoria" >
                                        <i class="fas fa-eye" style="font-size: 15px;"></i>
                                    </span> Referencias
                  </button>
                  <button class="btn my-4 btn-outline-info btn-sm" type="submit" style="margin-right: 8px"
                                    (click)="ObtenerInfoCliente(item.id)">
                                    <span title="Eliminar venta">
                                        <i class="fas fa-eye" style="font-size: 15px;"></i>
                                    </span> Cliente
                  </button>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
  }
  @if (showAddLab) {
    <div class="card-body bg-white">
      <!-- Info laboral -->
      <h6 class="heading-small text-muted mb-4">Información laboral, los campos marcados con (*) son obligatorios</h6>
      <div class="row">
        <div class="col-lg-4">
          <div class="form-group">
            <label for="nitEmpresa">NIT Empresa (*)</label>
            <input type="text" class="form-control" id="nitEmpresa"
                   [(ngModel)]="infoLab.nitEmpresa"
                   name="nitEmpresa">
          </div>
        </div>
        <div class="col-lg-4">
          <div class="form-group">
            <label for="nombreEmpresa">Nombre Empresa (*)</label>
            <input type="text" class="form-control" id="nombreEmpresa"
                   [(ngModel)]="infoLab.nombreEmpresa"
                   name="nombreEmpresa">
          </div>
        </div>
        <div class="col-lg-4">
          <div class="form-group">
            <label for="direccion">Dirección (*)</label>
            <input type="text" class="form-control" id="direccion"
                   [(ngModel)]="infoLab.direccion"
                   name="direccion">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-4">
          <div class="form-group">
            <label for="telefono">Teléfono (*)</label>
            <input type="text" class="form-control" id="telefono"
                   [(ngModel)]="infoLab.telefono" name="telefono">
          </div>
        </div>
        <div class="col-lg-4">
          <div class="form-group">
            <label for="cargo">Cargo (*)</label>
            <input type="text" class="form-control" id="cargo"
                   [(ngModel)]="infoLab.cargo" name="cargo">
          </div>
        </div>
        <div class="col-lg-4">
          <div class="form-group">
            <label for="fechaVinculacion">Fecha Vinculación (*)</label>
            <input type="date" class="form-control" id="fechaVinculacion"
                   [(ngModel)]="infoLab.fechaVinculacion"
                   name="fechaVinculacion">
          </div>
        </div>
      </div>
      @if (isLoading) {
        <div class="text-center">
          <i class="fas fa-spinner fa-spin"></i>
        </div>
      }
      @if (isSave) {
        <div class="text-center">
          <a style="font-size: 25px"><strong>{{ mensajeInfo }}</strong></a>
        </div>
      }
      @if(validateInfoLab){
        <div class="text-center mt-3">
          <button type="button" class="btn btn-outline-danger my-4 ml-2" style="margin-right: 8px"
                  (click)="cancelar()"
          >Cancelar
          </button>
          <button type="button" class="btn btn-outline-success my-4 ml-2" style="margin-right: 8px"
                  [disabled]="!isFormValidLab()" (click)="onSubmitLab(infoLab)"
          >Crear
          </button>
        </div>
      } @else {
        <div class="text-center mt-3">
          <button type="button" class="btn btn-outline-danger my-4 ml-2" style="margin-right: 8px"
                  (click)="cancelar()"
          >Cancelar
          </button>
          <button type="button" class="btn btn-outline-success my-4 ml-2" style="margin-right: 8px"
                  (click)="updateInfoLaboral(infoLab)"
          >Actualizar
          </button>
          <button type="button" class="btn btn-outline-danger my-4 ml-2"
                  (click)="ElimianInfoLab(infoLab.idInfoLab)"
          >Eliminar
          </button>
        </div>
      }
      <!-- info laboral -->

    </div>
  }

  @if (showAddCliente) {
    <div class="card-body bg-white">
      <h6 class="heading-small mb-4">Información de cliente, los campos marcados con (*) son obligatorios</h6>
      <div class="pl-lg-4">
        <div class="row">
          <div class="col-lg-4">
            <div class="form-group">
              <label class="form-control-label" for="input-last-name">Tipo de documento (*)</label>
              <select id="input-rol" class="form-control form-control-alternative"
                      [(ngModel)]="infoCliente.tipoDocumento"
                      name="tipoDocumento">
                <option value="CC">Cedula de ciudadania</option>
                <option value="CE">Cedula de extanjeria</option>
                <option value="NIT">Numero Identificacionh Tributaria</option>
                <option value="TI">Tarjeta de identidad</option>
              </select>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="form-group">
              <label class="form-control-label" for="input-first-name">Numero de documento (*)</label>
              <input type="text"
                     class="form-control form-control-alternative"
                     [(ngModel)]="infoCliente.numeroDocumento"
                     name="numeroDocumento"> <!-- Agrega el atributo name -->
            </div>

          </div>
          <div class="col-lg-4">
            <div class="form-group">
              <label class="form-control-label" for="input-last-name">Nombres y apellidos (*)</label>
              <input type="text" id="input-last-name"
                     class="form-control form-control-alternative"
                     [(ngModel)]="infoCliente.apellidos"
                     name="apellidos">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-3">
            <div class="form-group">
              <label class="form-control-label" for="input-first-name">Direccion residencia (*)</label>
              <input type="text"
                     class="form-control form-control-alternative"
                     [(ngModel)]="infoCliente.residencia"
                     name="residencia">
            </div>
          </div>
          <div class="col-lg-3">
            <div class="form-group">
              <label class="form-control-label" for="input-first-name">Ciudad (*)</label>
              <input type="text"
                     class="form-control form-control-alternative"
                     [(ngModel)]="infoCliente.ciudad"
                     name="ciudad">
            </div>
          </div>
          <div class="col-lg-3">
            <div class="form-group">
              <label class="form-control-label" for="input-first-name">Telefono (*)</label>
              <input type="text"
                     class="form-control form-control-alternative"
                     [(ngModel)]="infoCliente.telefono"
                     name="telefono"
              >
            </div>
          </div>
          <div class="col-lg-3">
            <div class="form-group">
              <label class="form-control-label" for="input-first-name">Correo electronico (*)</label>
              <input type="email"
                     class="form-control form-control-alternative"
                     [(ngModel)]="infoCliente.email"
                     name="email">
            </div>
          </div>
        </div>
      </div>
      @if (isLoading) {
        <div class="text-center">
          <i class="fas fa-spinner fa-spin"></i>
        </div>
      }
      @if (isSave) {
        <div class="text-center">
          <a style="font-size: 25px"><strong>{{ mensajeInfo }}</strong></a>
        </div>
      }
      <div class="text-center mt-3">
        <button type="button" class="btn btn-outline-danger my-4 ml-2" style="margin-right: 5px"
               (click)="cancelar()" >Cancelar
        </button>
        <button type="button" class="btn btn-outline-success my-4 ml-2" style="margin-right: 5px"
               (click)="updateCliente(infoCliente)" >Actualizar cliente
        </button>
        <button type="button" class="btn btn-outline-danger my-4 ml-2"
               (click)="ElimianCliente(infoCliente.id)" >Eliminar
        </button>
      </div>
    </div>
  }

  @if (showTableRef) {
    <div class="row">
      <div class="col">
        <div class="card shadow">
          <div class=" card-header border-0 "><h3 class=" mb-0">Lista de referencias</h3></div>
          <div class="table-responsive">
            <table class="table align-items-center table-flush">
              <thead class="thead-light">
              <tr>
                <th scope="col">Nombres y apellidos</th>
                <th scope="col">Numero Documento</th>
                <th scope="col">Tipo Documento</th>
                <th scope="col">Parentesco</th>
                <th scope="col">Ciudad</th>
                <th scope="col">Direccion residencia</th>
                <th scope="col">Telefono</th>
              </tr>
              </thead>
              <tbody>
                @for (item of referencias; track item){
                  <tr >
                    <td>{{ item.nombresApellidos}}</td>
                    <td>{{ item.numeroDocumento }}</td>
                    <td>{{ item.tipoDocumento }}</td>
                    <td>{{item.parentezco}}</td>
                    <td>{{ item.ciudad}}</td>
                    <td>{{ item.residencia}}</td>
                    <td>{{ item.telefono}}</td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  }
</div>

